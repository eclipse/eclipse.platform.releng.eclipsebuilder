<project default="main">

	<target name="init">
		<property name="buildId" value="I20101012-0800" />
		<property name="os" value="win32" />
		<property name="ws" value="win32" />
		<property name="arch" value="x86_64" />
		<echo message="WORKSPACE ${WORKSPACE}" />
		<echo message="BUILD_ID ${BUILD_ID}" />
		<property name="testDir" value="${WORKSPACE}\${BUILD_ID}" />
		<echo message="testDir ${testDir}" />
		<property name="executionDir" value="${testDir}/eclipse-testing" />
		<mkdir dir="${executionDir}" />
		<echo message="executionDir ${excutionDir}" />
		<echo message="hudson ${hudson}" />
	</target>

	<target name="main" depends="init">
		<!--old way uses available call, could switch to this method even though the build is much faster -->
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildId}/eclipse-SDK-${buildId}-win32-x86_64.zip" dest="${executionDir}/eclipse-SDK-${buildId}-win32-x86_64.zip" />
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildId}/eclipse-Automated-Tests-${buildId}.zip" dest="${testDir}/eclipse-Automated-Tests-${buildId}.zip" />
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildId}/eclipse-platform-${buildId}-win32-x86_64.zip" dest="${executionDir}/eclipse-platform-${buildId}-win32_x86_64.zip" />
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildId}/eclipse-${buildId}-delta-pack.zip" dest="${executionDir}/eclipse-${buildId}-delta-pack.zip" />
		<get src="http://download.eclipse.org/eclipse/downloads/drops/${buildId}/eclipse-Automated-Tests-${buildId}.zip" dest="${executionDir}/eclipse-Automated-Tests-${buildId}.zip" />
		<get src="http://download.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/eclipse-platform-3.6-win32_x64_64.zip" dest="${executionDir}/eclipse-platform-3.6-win32_x86_64.zip"/>
		<property name="test.xml" value="../org.eclipse.releng.basebuilder/plugins/org.eclipse.build.tools/scripts/test.xml" />
		<property file="eclipse/buildConfigs/sdk.tests/testConfigs/win7x86_64/testing.properties" />
		<property name="tester" value="${executionDir}" />
		<copy todir="${executionDir}">
			<fileset dir="eclipse/buildConfigs/sdk.tests/testConfigs/win7x86_64" />
		</copy>
		<copy todir="${executionDir}" overwrite="true">
			<fileset dir="eclipse/buildConfigs/sdk.tests/testScripts" />
		</copy>
		<ant antfile="${test.xml}" />
	</target>

</project>
