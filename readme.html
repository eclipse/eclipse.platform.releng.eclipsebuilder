<title>org.eclipse.releng.eclipsebuilder README</title> 
<p>Last Updated: July 24, 2003</p>
<p><b>Description</b></p>
<p>org.eclipse.releng.eclipsebuilder contains Ant scripts that use the script 
  generation facilities in org.eclipse.pde.build to build all shipped components 
  of Eclipse: SDK, platform jdt, examples, tests and team extras. A wrapper script, 
  org.eclipse.releng.eclipsebuilder/build.xml, is provided to build a specified 
  component and provides default settings of necessary Ant properties used in 
  the build.<br>
  <br>
</p>
<p><b>Prerequisites</b><br>
</p>
<p>1. CVS version 1.10 or higher.<br>
  2. <a href="http://java.sun.com/j2se/1.3/download.html">1.3.1 level JDK</a>.<br>
  3. (optional) 1.4 level JDK for generating javadoc<br>
  4. (When building Windows SDK, Platform or examples on non Windows systems only) 
  a 1.3 level Windows JRE<br>
  5. <a href="http://www.info-zip.org/pub/infozip/">Info-Zip zip and unzip</a><br>
  6. (for building Mac OSX components) GNU tar and gzip.<br>
  6. org.eclipse.releng.basebuilder and org.eclipse.releng.eclipsebuilder from 
  <a href="http://dev.eclipse.org/viewcvs/">dev.eclipse.org</a>.<br>
  <br>
</p>
<p><b>Initial Setup<br>
  <br>
  </b>1. Add the zip, unzip, tar, gzip and cvs executables to your path as required.<br>
  2. Add the JDK bin or jre/bin directory to your path.<b><br>
  </b>3. Check out org.eclipse.releng.basebuilder and org.eclipse.releng.eclipsebuilder 
  into a directory.<b><br>
  <br>
  <br>
  Run the Build</b></p>
<p> cd to org.eclipse.releng.eclipsebuilder directory and execute the following 
  command (currently the build.xml script can only be executed in a headless eclipse 
  due to <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=35923">bug 35923</a>): 
</p>
<p><b>java -cp ../org.eclipse.releng.basebuilder/startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=sdk 
  | platform | jdt | sdk.examples | sdk.tests [-DJAVADOC14_HOME=&lt;path to jdk 
  bin directory containing javadoc tool&gt;] [<a href="#properties">additional 
  Ant property settings as per table below</a>]</b><br>
</p>
<p><br>
  The component property value maps to the directory name which contains the scripts 
  which will build the described Eclipse component. <br>
  <br>
  The JAVADOC14_HOME property is used in the *.doc.isv/buildDoc.xml scripts and 
  must be set to the bin directory of a JDK containing the javadoc tool in order 
  to generate javadoc in both org.eclipse.platform.doc.isv and org.eclipse.jdt.doc.isv. 
  A 1.4 level JDK is recommended to generate javadoc with the correct separator 
  character '/' in links to external classes (see <a href="http://developer.java.sun.com/developer/bugParade/bugs/4359874.html">http://developer.java.sun.com/developer/bugParade/bugs/4359874.html</a>). 
  This property setting is not required if javadoc generation is not needed.</p>
<p><br>
  <b><a name="Parameters"></a>Additional Ant Properties used in the build<br>
  <br>
  </b>The following properties are set in a build.properties for the specified 
  component. They can be overridden by setting them at the command line at build 
  time or by changing the value in the component's build.properties.</p>
<table width="100%" border="1">
  <tr> 
    <td>Name</td>
    <td>Description</td>
  </tr>
  <tr> 
    <td height="36">buildDirectory</td>
    <td height="36">The absolute path to a working directory where the source 
      for the build will be exported, where scripts will be generated and where 
      the end products of the build will be located. On Windows systems, the path 
      length should not exceed thirty characters due to path length limitations 
      when compiling some classes in eclipse.</td>
  </tr>
  <tr> 
    <td>buildId</td>
    <td>The build name. Default set to &quot;build&quot;.</td>
  </tr>
  <tr> 
    <td>buildLabel</td>
    <td>Refers to the name of the directory which will contain the end result 
      of the build. Default set to ${buildType}.${buildId}, ie.&quot;I.build&quot;. 
      This directoryn will be created inside the location specified by the ${buildDirectory} 
      property.</td>
  </tr>
  <tr> 
    <td height="26">baseLocation</td>
    <td height="26">A directory separate from buildDirectory which contains pre-built 
      plugins and features against which to compile. The basedirectory must not 
      contain any features, plugins or fragments which are already or will be 
      located in the buildDirectory.</td>
  </tr>
  <tr> 
    <td>buildType</td>
    <td> 
      <p>Letters I, N, S, R or M are used in Eclipse builds to identify builds 
        as being one of the following:<br>
        <br>
        I - Integration<br>
        N - Nightly<br>
        S - Stable<br>
        R - Release<br>
        M - Maintenance<br>
      </p>
      <p> If set to N, all source will be checked out from the HEAD stream. In 
        all other cases, tags as specifed in map files will be used when exporting 
        plugins to the buildDirectory. </p>
    </td>
  </tr>
  <tr> 
    <td>collPlace</td>
    <td>The directory relative to ${buildLabel} in which built features and plugins 
      are gathered. Default set to &quot;eclipse&quot;.</td>
  </tr>
  <tr> 
    <td>collBase</td>
    <td>The directory relative to ${buildLabel} in which to execute zip of the 
      ${collPlace}directory and configuration specific root files.</td>
  </tr>
  <tr> 
    <td>configs</td>
    <td> 
      <p>An ampersand separated list of configurations to build where a configuration 
        is specified as &lt;os&gt;,&lt;ws&gt;,&lt;arch&gt;.<br>
        ie.configs=&quot;win32,win32,x86 &amp; linux, motif, x86 &amp; linux, 
        gtk, x86&quot;. See list of <a href="#buildconfigs">build configurations</a> 
        in the table below.</p>
    </td>
  </tr>
  <tr> 
    <td>bootclasspath</td>
    <td>Sets the value for the attribute &quot;bootclasspath&quot; in calls to 
      the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; 
      task</a> in a plugins' build.xml. Default set to ${java.home}/lib/rt.jar.</td>
  </tr>
  <tr> 
    <td>javacFailOnError</td>
    <td>Sets the value for the attribute &quot;failonerror&quot; in calls to the 
      <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; 
      task</a> in a plugins' build.xml. Build will continue even if there are 
      compilation errors when this is set to false.</td>
  </tr>
  <tr> 
    <td>javacDebugInfo</td>
    <td>Sets the value for the attribute &quot;debug&quot; in calls to the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant 
      &lt;javac&gt; task </a>in a plugins' build.xml. Default set to on.</td>
  </tr>
  <tr> 
    <td>javacVerbose</td>
    <td>Sets the value for the attribute &quot;verbose&quot; in calls to the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant 
      &lt;javac&gt; task</a> in a plugins' build.xml. Default set to true.</td>
  </tr>
  <tr> 
    <td>javacSource</td>
    <td>Sets the value for the attribute &quot;source&quot; in calls to the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant 
      &lt;javac&gt; task</a> in a plugins' build.xml. Default set to 1.3.</td>
  </tr>
  <tr> 
    <td>javacTarget</td>
    <td>Sets the value for the attribute &quot;target&quot; in calls to the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant 
      &lt;javac&gt; task</a> in a plugins' build.xml. Default set to 1.1.</td>
  </tr>
  <tr> 
    <td>mapVersionTag</td>
    <td> 
      <p>Sets the tag attribute in a call to the <a href="http://ant.apache.org/manual/CoreTasks/cvs.html">Ant 
        &lt;cvs&gt; task </a>to check out org.eclipse.releng, the map file project 
        on dev.eclipse.org used in the build.</p>
      <p>Can be set to a specific tag to download the map files used for a previous 
        integration build. Typically, these tags are in the form &quot;v&lt;date 
        and timestamp of build&gt;&quot; for example &quot;v200307110800&quot; 
        will checkout the map files used to run the integration at the specified 
        date/time. This mechanism will only work with 3.0 + stream builds &gt; 
        20030701.<br>
      </p>
    </td>
  </tr>
  <tr> 
    <td>zipargs</td>
    <td>Arguments to send to the zip executable. ie. zipargs=-y on Linux preserves 
      symbolic links.</td>
  </tr>
  <tr> 
    <td>baseos,basews,basearch</td>
    <td>The os, ws and arch values of a pre-built eclipse component which is being 
      compiled against. See list of possible values in the table of <a href="#buildconfigs">build 
      configurations</a>.</td>
  </tr>
  <tr> 
    <td>timestamp</td>
    <td>A timestamp used to fill in value for buildid in about.mappings files. 
      The timestamp is also used to tag the org.eclipse.releng project on dev.eclipse.org 
      only when an appropriate value for mapCvsRoot is provided and when the tagMaps 
      Ant property is set. </td>
  </tr>
</table>
<p><b><br>
  Examples<br>
  <br>
  <br>
  Build Windows SDK component on Windows with javadoc generation</b></p>
<p><b>java -cp ..\org.eclipse.releng.basebuilder\startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=sdk 
  -Dconfigs=&quot;win32,win32,x86&quot; -Djavacfailonerror=true -DjavacVerbose=false 
  -DbuildDirectory=c:\mybuild</b> -<b>DJAVADOC14_HOME=c:\jdk141\bin</b><br>
  <br>
  This builds an eclipse SDK for the windows configuration only in the directory 
  c:\mybuild. &quot;-DjavaVerbose=false&quot; indicates that no compile logs will 
  be generated and &quot;-Djavacfailonerror=true&quot; will cause the build to 
  fail if there are any compile errors. <b></b> By setting the value of &quot;-DJAVA14_HOME&quot;, 
  javadoc will be generated in plugins org.eclipse.platform.doc.isv and org.eclipse.jdt.doc.isv.<br>
  <br>
  <br>
  <b>Build Linux GTK and Motif SDK components on Linux</b><br>
  <br>
  <b>java -cp ../org.eclipse.releng.basebuilder/startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=sdk 
  -Dconfigs=&quot;linux,gtk,x86 &amp; linux,motif,x86&quot; -Dzipargs=-y</b><br>
  <br>
  This builds an eclipse SDK for the linux gtk and linux motif configurations. 
  By default the buildDirectory will be set &quot;src&quot; in eclipse.releng.eclipsebuilder. 
  &quot;-Dzipargs=-y&quot; is used here to preserve the symbolic links libXm.so 
  and libXm.so.2 in the Linux Motif root directory of eclipse.<br>
  <br>
  <br>
  <b>Build Windows SDK component on Linux</b></p>
<p><b>java -cp ../org.eclipse.releng.basebuilder/startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=sdk 
  -Dconfigs=&quot;win32,win32,x86&quot; -Dbootclasspath=/builds/windows/jre/lib/rt.jar</b><br>
  <br>
  This is a command that can be used to build an eclipse SDK for the windows configuration 
  on a *nix system. A bootclasspath pointing to a Windows rt.jar is explicitly 
  specified so that bootstrap classes not available in the *nux virtual machine 
  are available to compile windows specific classes in Eclipse. By default the 
  buildDirectory will be set &quot;src&quot; in eclipse.releng.eclipsebuilder.<br>
  <br>
</p>
<p><b>Build Linux Motif platform component on Linux</b></p>
<p><b>java -cp ../org.eclipse.releng.basebuilder/startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=platform 
  -Dconfigs=&quot;linux,motif,x86&quot; -DbuildDirectory=/builds/platform</b></p>
<p>This builds an eclipse platform runtime for the linux motif configuration. 
  The buildDirectory will be set &quot;/builds/platform&quot;.<br>
  <br>
</p>
<p><b>Build platform-independant JDT component against a pre-built Windows Platform 
  component on Windows</b></p>
<p><b>java -cp ..\org.eclipse.releng.basebuilder\startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=jdt 
  -Dconfigs=&quot;*,*,*&quot; -DbuildDirectory=c:\builds\jdt -DbaseLocation=c:\builds\platform 
  -Dbaseos=win32 -Dbasews=win32 -Dbasearch=x86 -Djavacfailonerror=true</b></p>
<p></p>
<p>This builds an Eclipse JDT component against a pre-built eclipse platform plugins. 
  The build will fail if there are compile errors. The value specified for baseLocation 
  must not contain any JDT features or plugins or the build will fail. &quot;baseos&quot;, 
  &quot;basews&quot; and &quot;basearch&quot; should be specified in order to 
  find the correct location of platform specific jars (i.e. swt.jar) on the classpath.<br>
  <br>
  <b><br>
  Building Eclipse FTP-WebDAV against a pre-built Eclipse SDK on Linux</b></p>
<p><b>java -cp ../org.eclipse.releng.basebuilder/startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=team.extras 
  -DbuildDirectory=/builds/team.extras -DbaseLocation=/home/user/fred/eclipse 
  -Dbaseos=linux -Dbasews=motif -Dbasearch=x86 -Djavacfailonerror=true</b></p>
<p></p>
<p>This builds an Eclipse FTP-WebDAV component against an eclipse SDK installed 
  in directory /home/user/fred/eclipse. The build will fail if there are compile 
  errors. The build output will be located in /builds/team.extras.</p>
<p><br>
  <b>Building Eclipse JUnit Plugin tests against a pre-built Eclipse SDK on Windows</b></p>
<p><b>java -cp ..\org.eclipse.releng.basebuilder\startup.jar org.eclipse.core.launcher.Main 
  -application org.eclipse.ant.core.antRunner -buildfile build.xml -Dcomponent=sdk.tests 
  -DbuildDirectory=c:\tests -DbaseLocation=c:\eclipse -Dbaseos=win32 -Dbasews=win32 
  -Dbasearch=x86 -Djavacfailonerror=true</b></p>
<p></p>
<p>This builds an Eclipse SDK tests component in the directory c:\tests against 
  an eclipse installed in the directory c:\. The build will fail if there are 
  compile errors.<br>
  <br>
</p>
<p><font size="+1"><b><a name="buildconfigs"></a>Eclipse Build Configurations</b></font></p>
<p><b></b>One or more build configurations can be specified to build any of the 
  Eclipse components. Default values for each component are specified in the build.properties 
  for the component. </p>
<table width="100%" border="1">
  <tr> 
    <td width="25%" height="24">Build Configuration (os, ws, arch)</td>
    <td width="23%" height="24">Operating System (os)</td>
    <td width="18%" height="24">Window System (ws)</td>
    <td width="34%" height="24">Processor Architecture (arch)</td>
  </tr>
  <tr> 
    <td width="25%" height="30">linux, motif, x86</td>
    <td width="23%" height="30">Redhat Linux 9 Professional</td>
    <td width="18%" height="30">Motif</td>
    <td width="34%" height="30">Intel x86</td>
  </tr>
  <tr> 
    <td width="25%">linux, gtk, x86</td>
    <td width="23%">Redhat Linux 9 Professional</td>
    <td width="18%">GTK</td>
    <td width="34%">Intel x86</td>
  </tr>
  <tr> 
    <td width="25%">aix, motif, ppc</td>
    <td width="23%">IBM AIX 5.1</td>
    <td width="18%">Motif</td>
    <td width="34%">PowerPC</td>
  </tr>
  <tr> 
    <td width="25%">solaris, motif, sparc</td>
    <td width="23%">Sun Solaris 8</td>
    <td width="18%">Motif</td>
    <td width="34%">SPARC</td>
  </tr>
  <tr> 
    <td width="25%">hpux, motif, PA_RISC</td>
    <td width="23%">HP HP-UX 11i</td>
    <td width="18%">Motif</td>
    <td width="34%">hp9000 PA-RISC</td>
  </tr>
  <tr> 
    <td width="25%">qnx, photon, x86</td>
    <td width="23%">QNX Neutrino RTOS</td>
    <td width="18%">Photon</td>
    <td width="34%">Intel x86</td>
  </tr>
  <tr> 
    <td width="25%">macosx, carbon, ppc</td>
    <td width="23%">Apple Mac OS X 10.2</td>
    <td width="18%">Carbon</td>
    <td width="34%">PowerPC</td>
  </tr>
  <tr> 
    <td width="25%">win32,win32, x86</td>
    <td width="23%">Microsoft Windows XP</td>
    <td width="18%">Win32</td>
    <td width="34%">Intel x86</td>
  </tr>
</table>
<p>&nbsp;</p>
