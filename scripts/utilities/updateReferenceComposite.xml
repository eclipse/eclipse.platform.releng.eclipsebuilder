<project
    default="updateReferenceComposite"
    basedir=".">
    <target
        name="updateReferenceComposite">
       <!-- fail if our key required variables are not defined by caller. There are no
       good defaults -->
    	<!-- currently, can be values such as 
    	/shared/webtools/integration
    	/shared/webtools/maintenance
    	-->
        <fail
            unless="referenceCompositeDir"/>
        <fail
            unless="dropDirectory"/>
       <!-- note, we currently don't require that dropDirectory exists, since techically does 
       not have to ... but, we might want to put a sanity check in here, since its anticipated it 
       always will for the way we are using this script -->
    	
    	<!-- make sure directory exists, if it doesn't already, since p2 operation will fail if it doesn't. -->
        <mkdir
            dir="${referenceCompositeDir}"/>

        <p2.composite.repository>
            <repository
                location="file:${referenceCompositeDir}"
                name="Reference repository"
                compressed="false"/>
            <add>
                <repository
                    location="file://${dropDirectory}/repository/"/>
                <repository
                    location="file://${dropDirectory}/repositoryunittests/"/>
            </add>
        </p2.composite.repository>
    </target>
</project>


