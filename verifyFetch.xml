<project name="Fetch Verification" default="run" basedir=".">
	<taskdef name="verifyFetch" classname="org.eclipse.releng.FetchValidator"/>
	
	<property file="label.properties" />
	<property file="monitor.properties" />

	<target name="run">

		<echo message="Verifying fetch..." />
	
		<!--
			A failed fetch will throw a BuildException, terminate the build, and send email
			notification.
		-->
	
		<verifyFetch
			install="${buildDirectory}"
			list="org.eclipse.platform-feature,
			org.eclipse.platform.win32-feature,
			org.eclipse.platform.hpux.motif-feature,
			org.eclipse.platform.linux.motif-feature,
			org.eclipse.platform.linux.gtk-feature,
			org.eclipse.platform.aix.motif-feature,
			org.eclipse.platform.qnx.photon-feature,
			org.eclipse.platform.solaris.motif-feature,
			org.eclipse.platform.macosx.carbon-feature,
			org.eclipse.jdt-feature,
			org.eclipse.jdt.macosx-feature,
			org.eclipse.pde-feature,
			org.eclipse.sdk.tests-feature,
			org.eclipse.sdk.examples-feature,
			org.eclipse.sdk.examples.win32-feature,
			org.eclipse.platform.source-feature,
			org.eclipse.platform.win32.source-feature,
			org.eclipse.platform.hpux.motif.source-feature,
			org.eclipse.platform.linux.motif.source-feature,
			org.eclipse.platform.linux.gtk.source-feature,
			org.eclipse.platform.aix.motif.source-feature,
			org.eclipse.platform.qnx.photon.source-feature,
			org.eclipse.platform.solaris.motif.source-feature,
			org.eclipse.platform.macosx.carbon.source-feature,
			org.eclipse.jdt.source-feature,
			org.eclipse.jdt.macosx.source-feature,
			org.eclipse.sdk.win32-feature,
			org.eclipse.sdk.linux.motif-feature,
			org.eclipse.sdk.aix.motif-feature,
			org.eclipse.sdk.solaris.motif-feature,
			org.eclipse.sdk.hpux.motif-feature,
			org.eclipse.sdk.linux.gtk-feature,
			org.eclipse.sdk.qnx.photon-feature,
			org.eclipse.sdk.macosx.carbon-feature,
			org.eclipse.team.extras-feature"
			/>
			
			<available file="${buildDirectory}/plugins/platform-launcher" property="launcher.available" />
			<antcall target="launcherMissing" />
			
	</target>
	
	<target name="launcherMissing" unless="launcher.available">
		<fail message="The platform-launcher project did not get fetched."/>
	</target>
	
</project>