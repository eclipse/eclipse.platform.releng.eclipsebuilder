<project name="provisioning build" default="build">

	<target name="init">
		<property name="p2.root" value="${buildDirectory}/${buildId}/p2temp" />
		<mkdir dir="${p2.root}" />
		<property name="p2.output.base" value="${p2.root}/equinox.p2.build" />
		<mkdir dir="${p2.output.base}" />
		<property name="directorlog" value="${buildlogs}/director.txt" />

		<condition property="sdk.archive" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk-ppc.tar.gz">
			<equals arg1="${os.arch}" arg2="ppc64" />
		</condition>
		<condition property="sdk.archive" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk.tar.gz">
			<equals arg1="${os.arch}" arg2="i386" />
		</condition>
		<property name="sdk.archive" value="" />
		<property name="rcp.delta.archive" value="${postingDirectory}/${buildLabel}/eclipse-${buildId}-delta-pack.zip" />
		<condition property="rcp.archive" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-ppc.tar.gz">
			<equals arg1="${os.arch}" arg2="ppc64" />
		</condition>
		<condition property="rcp.archive" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk.tar.gz">
			<equals arg1="${os.arch}" arg2="i386" />
		</condition>
		<property name="rcp.archive" value="" />
		<property name="icu.base.archive" value="${postingDirectory}/${buildLabel}/com.ibm.icu.base-${buildId}.zip" />
		<property name="releng.tools.archive" value="${postingDirectory}/${buildLabel}/org.eclipse.releng.tools-${buildId}.zip" />

		<property name="p2.agent.install.win32" value="${p2.output.base}/agent.install.win32" />
		<mkdir dir="${p2.agent.install.win32}" />
		<property name="p2.agent.install.linux" value="${p2.output.base}/agent.install.linux" />
		<mkdir dir="${p2.agent.install.linux}" />
		<property name="p2.agent.install.macosx" value="${p2.output.base}/agent.install.macosx" />
		<mkdir dir="${p2.agent.install.macosx}" />

		<property name="p2.sdk.install.win32.win32.x86" value="${p2.output.base}/sdk.install.win32.win32.x86" />
		<mkdir dir="${p2.sdk.install.win32.win32.x86}" />
		<property name="p2.sdk.install.win32.win32.x86_64" value="${p2.output.base}/sdk.install.win32.win32.x86_64" />
		<mkdir dir="${p2.sdk.install.win32.win32.x86_64}" />
		<property name="p2.sdk.install.win32.wpf.x86" value="${p2.output.base}/sdk.install.win32.wpf.x86" />
		<mkdir dir="${p2.sdk.install.win32.wpf.x86}" />
		<property name="p2.sdk.install.linux.gtk.x86" value="${p2.output.base}/sdk.install.linux.gtk.x86" />
		<mkdir dir="${p2.sdk.install.linux.gtk.x86}" />
		<property name="p2.sdk.install.linux.motif.x86" value="${p2.output.base}/sdk.install.linux.motif.x86" />
		<mkdir dir="${p2.sdk.install.linux.motif.x86}" />
		<property name="p2.sdk.install.linux.gtk.x86_64" value="${p2.output.base}/sdk.install.linux.gtk.x86_64" />
		<mkdir dir="${p2.sdk.install.linux.gtk.x86_64}" />
		<property name="p2.sdk.install.linux.gtk.ppc" value="${p2.output.base}/sdk.install.linux.gtk.ppc" />
		<mkdir dir="${p2.sdk.install.linux.gtk.ppc}" />
		<property name="p2.sdk.install.linux.gtk.s390" value="${p2.output.base}/sdk.install.linux.gtk.s390" />
		<mkdir dir="${p2.sdk.install.linux.gtk.s390}" />
		<property name="p2.sdk.install.linux.gtk.s390x" value="${p2.output.base}/sdk.install.linux.gtk.s390x" />
		<mkdir dir="${p2.sdk.install.linux.gtk.s390x}" />
		<property name="p2.sdk.install.hpux.motif.ia64_32" value="${p2.output.base}/sdk.install.hpux.motif.ia64_32" />
		<mkdir dir="${p2.sdk.install.hpux.motif.ia64_32}" />
		<property name="p2.sdk.install.solaris.gtk.sparc" value="${p2.output.base}/sdk.install.solaris.gtk.sparc" />
		<mkdir dir="${p2.sdk.install.solaris.gtk.sparc}" />
		<property name="p2.sdk.install.solaris.gtk.x86" value="${p2.output.base}/sdk.install.solaris.gtk.x86" />
		<mkdir dir="${p2.sdk.install.solaris.gtk.x86}" />
		<property name="p2.sdk.install.aix.motif.ppc" value="${p2.output.base}/sdk.install.aix.motif.ppc" />
		<mkdir dir="${p2.sdk.install.aix.motif.ppc}" />
		<property name="p2.sdk.install.macosx.carbon.x86" value="${p2.output.base}/sdk.install.macosx.carbon.x86" />
		<mkdir dir="${p2.sdk.install.macosx.carbon.x86}" />
		<property name="p2.sdk.install.macosx.cocoa.x86" value="${p2.output.base}/sdk.install.macosx.cocoa.x86" />
		<mkdir dir="${p2.sdk.install.macosx.cocoa.x86}" />
		<property name="p2.sdk.install.macosx.cocoa.x86_64" value="${p2.output.base}/sdk.install.macosx.cocoa.x86_64" />
		<mkdir dir="${p2.sdk.install.macosx.cocoa.x86_64}" />

		<!--platform zips-->
		<property name="p2.platform.install.win32.win32.x86" value="${p2.output.base}/platform.install.win32.win32.x86" />
		<mkdir dir="${p2.platform.install.win32.win32.x86}" />
		<property name="p2.platform.install.win32.win32.x86_64" value="${p2.output.base}/platform.install.win32.win32.x86_64" />
		<mkdir dir="${p2.platform.install.win32.win32.x86_64}" />
		<property name="p2.platform.install.win32.wpf.x86" value="${p2.output.base}/platform.install.win32.wpf.x86" />
		<mkdir dir="${p2.platform.install.win32.wpf.x86}" />
		<property name="p2.platform.install.linux.gtk.x86" value="${p2.output.base}/platform.install.linux.gtk.x86" />
		<mkdir dir="${p2.platform.install.linux.gtk.x86}" />
		<property name="p2.platform.install.linux.gtk.x86_64" value="${p2.output.base}/platform.install.linux.gtk.x86_64" />
		<mkdir dir="${p2.platform.install.linux.gtk.x86_64}" />
		<property name="p2.platform.install.linux.gtk.ppc" value="${p2.output.base}/platform.install.linux.gtk.ppc" />
		<mkdir dir="${p2.platform.install.linux.gtk.ppc}" />
		<property name="p2.platform.install.hpux.motif.ia64_32" value="${p2.output.base}/platform.install.hpux.motif.ia64_32" />
		<mkdir dir="${p2.platform.install.hpux.motif.ia64_32}" />
		<property name="p2.platform.install.solaris.gtk.sparc" value="${p2.output.base}/platform.install.solaris.gtk.sparc" />
		<mkdir dir="${p2.platform.install.solaris.gtk.sparc}" />
		<property name="p2.platform.install.solaris.gtk.x86" value="${p2.output.base}/platform.install.solaris.gtk.x86" />
		<mkdir dir="${p2.platform.install.solaris.gtk.x86}" />
		<property name="p2.platform.install.aix.motif.ppc" value="${p2.output.base}/platform.install.aix.motif.ppc" />
		<mkdir dir="${p2.platform.install.aix.motif.ppc}" />
		<property name="p2.platform.install.macosx.carbon.x86" value="${p2.output.base}/platform.install.macosx.carbon.x86" />
		<mkdir dir="${p2.platform.install.macosx.carbon.x86}" />
		<property name="p2.platform.install.macosx.cocoa.x86" value="${p2.output.base}/platform.install.macosx.cocoa.x86" />
		<mkdir dir="${p2.platform.install.macosx.cocoa.x86}" />
		<property name="p2.platform.install.macosx.cocoa.x86_64" value="${p2.output.base}/platform.install.macosx.cocoa.x86_64" />
		<mkdir dir="${p2.platform.install.macosx.cocoa.x86_64}" />

		<!--platform sdk zips-->
		<property name="p2.platformsdk.install.win32.win32.x86" value="${p2.output.base}/platformsdk.install.win32.win32.x86" />
		<mkdir dir="${p2.platformsdk.install.win32.win32.x86}" />
		<property name="p2.platformsdk.install.win32.win32.x86_64" value="${p2.output.base}/platformsdk.install.win32.win32.x86_64" />
		<mkdir dir="${p2.platformsdk.install.win32.win32.x86_64}" />
		<property name="p2.platformsdk.install.win32.wpf.x86" value="${p2.output.base}/platformsdk.install.win32.wpf.x86" />
		<mkdir dir="${p2.platformsdk.install.win32.wpf.x86}" />
		<property name="p2.platformsdk.install.linux.gtk.x86" value="${p2.output.base}/platformsdk.install.linux.gtk.x86" />
		<mkdir dir="${p2.platformsdk.install.linux.gtk.x86}" />
		<property name="p2.platformsdk.install.linux.gtk.x86_64" value="${p2.output.base}/platformsdk.install.linux.gtk.x86_64" />
		<mkdir dir="${p2.platformsdk.install.linux.gtk.x86_64}" />
		<property name="p2.platformsdk.install.linux.gtk.ppc" value="${p2.output.base}/platformsdk.install.linux.gtk.ppc" />
		<mkdir dir="${p2.platformsdk.install.linux.gtk.ppc}" />
		<property name="p2.platformsdk.install.hpux.motif.ia64_32" value="${p2.output.base}/platformsdk.install.hpux.motif.ia64_32" />
		<mkdir dir="${p2.platformsdk.install.hpux.motif.ia64_32}" />
		<property name="p2.platformsdk.install.solaris.gtk.sparc" value="${p2.output.base}/platformsdk.install.solaris.gtk.sparc" />
		<mkdir dir="${p2.platformsdk.install.solaris.gtk.sparc}" />
		<property name="p2.platformsdk.install.solaris.gtk.x86" value="${p2.output.base}/platformsdk.install.solaris.gtk.x86" />
		<mkdir dir="${p2.platformsdk.install.solaris.gtk.x86}" />
		<property name="p2.platformsdk.install.aix.motif.ppc" value="${p2.output.base}/platformsdk.install.aix.motif.ppc" />
		<mkdir dir="${p2.platformsdk.install.aix.motif.ppc}" />
		<property name="p2.platformsdk.install.macosx.carbon.x86" value="${p2.output.base}/platformsdk.install.macosx.carbon.x86" />
		<mkdir dir="${p2.platformsdk.install.macosx.carbon.x86}" />
		<property name="p2.platformsdk.install.macosx.cocoa.x86" value="${p2.output.base}/platformsdk.install.macosx.cocoa.x86" />
		<mkdir dir="${p2.platformsdk.install.macosx.cocoa.x86}" />
		<property name="p2.platformsdk.install.macosx.cocoa.x86_64" value="${p2.output.base}/platformsdk.install.macosx.cocoa.x86_64" />
		<mkdir dir="${p2.platformsdk.install.macosx.cocoa.x86_64}" />

		<!--rcp zips-->
		<property name="p2.rcp.install.win32.win32.x86" value="${p2.output.base}/rcp.install.win32.win32.x86" />
		<mkdir dir="${p2.rcp.install.win32.win32.x86}" />
		<property name="p2.rcp.install.win32.win32.x86_64" value="${p2.output.base}/rcp.install.win32.win32.x86_64" />
		<mkdir dir="${p2.rcp.install.win32.win32.x86_64}" />
		<property name="p2.rcp.install.win32.wpf.x86" value="${p2.output.base}/rcp.install.win32.wpf.x86" />
		<mkdir dir="${p2.rcp.install.win32.wpf.x86}" />
		<property name="p2.rcp.install.linux.gtk.x86" value="${p2.output.base}/rcp.install.linux.gtk.x86" />
		<mkdir dir="${p2.rcp.install.linux.gtk.x86}" />
		<property name="p2.rcp.install.linux.gtk.x86_64" value="${p2.output.base}/rcp.install.linux.gtk.x86_64" />
		<mkdir dir="${p2.rcp.install.linux.gtk.x86_64}" />
		<property name="p2.rcp.install.linux.gtk.ppc" value="${p2.output.base}/rcp.install.linux.gtk.ppc" />
		<mkdir dir="${p2.rcp.install.linux.gtk.ppc}" />
		<property name="p2.rcp.install.linux.gtk.s390" value="${p2.output.base}/rcp.install.linux.gtk.s390" />
		<mkdir dir="${p2.rcp.install.linux.gtk.s390}" />
		<property name="p2.rcp.install.linux.gtk.s390x" value="${p2.output.base}/rcp.install.linux.gtk.s390x" />
		<mkdir dir="${p2.rcp.install.linux.gtk.s390x}" />
		<property name="p2.rcp.install.hpux.motif.ia64_32" value="${p2.output.base}/rcp.install.hpux.motif.ia64_32" />
		<mkdir dir="${p2.rcp.install.hpux.motif.ia64_32}" />
		<property name="p2.rcp.install.solaris.gtk.sparc" value="${p2.output.base}/rcp.install.solaris.gtk.sparc" />
		<mkdir dir="${p2.rcp.install.solaris.gtk.sparc}" />
		<property name="p2.rcp.install.solaris.gtk.x86" value="${p2.output.base}/rcp.install.solaris.gtk.x86" />
		<mkdir dir="${p2.rcp.install.solaris.gtk.x86}" />
		<property name="p2.rcp.install.aix.motif.ppc" value="${p2.output.base}/rcp.install.aix.motif.ppc" />
		<mkdir dir="${p2.rcp.install.aix.motif.ppc}" />
		<property name="p2.rcp.install.macosx.carbon.x86" value="${p2.output.base}/rcp.install.macosx.carbon.x86" />
		<mkdir dir="${p2.rcp.install.macosx.carbon.x86}" />
		<property name="p2.rcp.install.macosx.cocoa.x86" value="${p2.output.base}/rcp.install.macosx.cocoa.x86" />
		<mkdir dir="${p2.rcp.install.macosx.cocoa.x86}" />
		<property name="p2.rcp.install.macosx.cocoa.x86_64" value="${p2.output.base}/rcp.install.macosx.cocoa.x86_64" />
		<mkdir dir="${p2.rcp.install.macosx.cocoa.x86_64}" />

		<!--rcp sdk zips-->
		<property name="p2.rcpsdk.install.win32.win32.x86" value="${p2.output.base}/rcpsdk.install.win32.win32.x86" />
		<mkdir dir="${p2.rcpsdk.install.win32.win32.x86}" />
		<property name="p2.rcpsdk.install.win32.win32.x86_64" value="${p2.output.base}/rcpsdk.install.win32.win32.x86_64" />
		<mkdir dir="${p2.rcpsdk.install.win32.win32.x86_64}" />
		<property name="p2.rcpsdk.install.win32.wpf.x86" value="${p2.output.base}/rcpsdk.install.win32.wpf.x86" />
		<mkdir dir="${p2.rcpsdk.install.win32.wpf.x86}" />
		<property name="p2.rcpsdk.install.linux.gtk.x86" value="${p2.output.base}/rcpsdk.install.linux.gtk.x86" />
		<mkdir dir="${p2.rcpsdk.install.linux.gtk.x86}" />
		<property name="p2.rcpsdk.install.linux.gtk.x86_64" value="${p2.output.base}/rcpsdk.install.linux.gtk.x86_64" />
		<mkdir dir="${p2.rcpsdk.install.linux.gtk.x86_64}" />
		<property name="p2.rcpsdk.install.linux.gtk.ppc" value="${p2.output.base}/rcpsdk.install.linux.gtk.ppc" />
		<mkdir dir="${p2.rcpsdk.install.linux.gtk.ppc}" />
		<property name="p2.rcpsdk.install.hpux.motif.ia64_32" value="${p2.output.base}/rcpsdk.install.hpux.motif.ia64_32" />
		<mkdir dir="${p2.rcpsdk.install.hpux.motif.ia64_32}" />
		<property name="p2.rcpsdk.install.solaris.gtk.sparc" value="${p2.output.base}/rcpsdk.install.solaris.gtk.sparc" />
		<mkdir dir="${p2.rcpsdk.install.solaris.gtk.sparc}" />
		<property name="p2.rcpsdk.install.solaris.gtk.x86" value="${p2.output.base}/rcpsdk.install.solaris.gtk.x86" />
		<mkdir dir="${p2.rcpsdk.install.solaris.gtk.x86}" />
		<property name="p2.rcpsdk.install.aix.motif.ppc" value="${p2.output.base}/rcpsdk.install.aix.motif.ppc" />
		<mkdir dir="${p2.rcpsdk.install.aix.motif.ppc}" />
		<property name="p2.rcpsdk.install.macosx.carbon.x86" value="${p2.output.base}/rcpsdk.install.macosx.carbon.x86" />
		<mkdir dir="${p2.rcpsdk.install.macosx.carbon.x86}" />
		<property name="p2.rcpsdk.install.macosx.cocoa.x86" value="${p2.output.base}/rcpsdk.install.macosx.cocoa.x86" />
		<mkdir dir="${p2.rcpsdk.install.macosx.cocoa.x86}" />
		<property name="p2.rcpsdk.install.macosx.cocoa.x86_64" value="${p2.output.base}/rcpsdk.install.macosx.cocoa.x86_64" />
		<mkdir dir="${p2.rcpsdk.install.macosx.cocoa.x86_64}" />


		<property name="base" value="${p2.output.base}/base" />
		<mkdir dir="${base}" />

		<property file="build.properties" />

		<property name="repo" value="${buildDirectory}/repo" />
		<mkdir dir="${repo}" />
		<property name="p2.flavor" value="tooling" />
		<property name="p2.agent.version" value="1.0.0.${buildId}" />
		<property name="p2.sdk.version" value="3.5.0.${buildId}" />
	</target>

	<target name="build" depends="init">
		<antcall target="extract">
			<param name="extract-src" value="${buildDirectory}/${buildLabel}/eclipse-master-${buildId}.zip" />
			<param name="extract-dest" value="${base}" />
		</antcall>

		<antcall target="extract">
			<param name="extract-src" value="${icu.base.archive}" />
			<param name="extract-dest" value="${base}" />
		</antcall>

		<delete failonerror="false">
			<fileset dir="${base}/eclipse/plugins">
				<include name="**/com.ibm.icu_*.jar" />
			</fileset>
		</delete>

		<antcall target="generate.metadata.releng.tools" />

		<parallel failonany="true" threadCount='4'>
			<antcall target="provision.agent" />
			<antcall target="provision.sdk" />
			<antcall target="provision.platform" />
			<antcall target="provision.platformsdk" />
			<antcall target="provision.rcp" />
			<antcall target="provision.rcpsdk" />
		</parallel>
		<antcall target="zip.install" />

		<!--Collect logs from p2 run and copy to build directory-->
		<property name="equinoxTestResults" value="${equinoxPostingDirectory}/${buildLabel}/testresults" />
		<mkdir dir="${equinoxTestResults}" />
		<copy todir="${buildlogs}" flatten="true">
			<fileset dir="${base.builder}/configuration">
				<include name="**/*.log" />
			</fileset>
			<fileset dir="${p2.root}">
				<include name="**/*.log" />
			</fileset>
		</copy>		
		<p2.process.artifacts repositoryPath="file://${buildRepo}" pack="true" />
	</target>

	<target name="provision.agent">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.equinox.p2.ui.admin.rcp.product" />
			<param name="p2.director.version" value="${p2.agent.version}" />
			<param name="p2.director.profile" value="EquinoxProvisioningUI" />
			<param name="p2.director.install.path" value="${p2.agent.install.win32}" />
			<param name="p2.director.extraArgs" value="" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.equinox.p2.ui.admin.rcp.product" />
			<param name="p2.director.version" value="${p2.agent.version}" />
			<param name="p2.director.profile" value="EquinoxProvisioningUI" />
			<param name="p2.director.install.path" value="${p2.agent.install.linux}" />
			<param name="p2.director.extraArgs" value="" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.equinox.p2.ui.admin.rcp.product" />
			<param name="p2.director.version" value="${p2.agent.version}" />
			<param name="p2.director.profile" value="EquinoxProvisioningUI" />
			<param name="p2.director.install.path" value="${p2.agent.install.macosx}" />
			<param name="p2.director.extraArgs" value="" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>
	</target>

	<target name="provision.sdk">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.win32.win32.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.win32.win32.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.win32.wpf.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="wpf" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.gtk.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.gtk.s390}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="s390" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.gtk.s390x}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="s390x" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.motif.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.linux.gtk.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.macosx.carbon.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="carbon" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.macosx.cocoa.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.macosx.cocoa.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.hpux.motif.ia64_32}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="hpux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ia64_32" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.solaris.gtk.sparc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="sparc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.solaris.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.sdk.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="SDKProfile" />
			<param name="p2.director.install.path" value="${p2.sdk.install.aix.motif.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="aix" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

	</target>

	<target name="provision.platform">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.win32.win32.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.win32.win32.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.win32.wpf.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="wpf" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.linux.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.linux.gtk.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.linux.gtk.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.macosx.carbon.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="carbon" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.macosx.cocoa.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.macosx.cocoa.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.hpux.motif.ia64_32}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="hpux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ia64_32" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.solaris.gtk.sparc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="sparc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.solaris.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.ide" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformProfile" />
			<param name="p2.director.install.path" value="${p2.platform.install.aix.motif.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="aix" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

	</target>

	<target name="provision.platformsdk">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.win32.win32.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.win32.win32.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.win32.wpf.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="wpf" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.linux.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.linux.gtk.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.linux.gtk.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.macosx.carbon.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="carbon" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.macosx.cocoa.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.macosx.cocoa.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.hpux.motif.ia64_32}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="hpux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ia64_32" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.solaris.gtk.sparc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="sparc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.solaris.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.platform.sdk" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="PlatformSDKProfile" />
			<param name="p2.director.install.path" value="${p2.platformsdk.install.aix.motif.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="aix" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>
	</target>

	<target name="provision.rcp">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.win32.win32.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.win32.win32.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.win32.wpf.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="wpf" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.linux.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.linux.gtk.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.linux.gtk.s390}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="s390" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.linux.gtk.s390x}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="s390x" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.linux.gtk.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.macosx.carbon.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="carbon" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.macosx.cocoa.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.hpux.motif.ia64_32}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="hpux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ia64_32" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.solaris.gtk.sparc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="sparc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.solaris.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPProfile" />
			<param name="p2.director.install.path" value="${p2.rcp.install.aix.motif.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="aix" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

	</target>

	<target name="provision.rcpsdk">
		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.win32.win32.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.win32.win32.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="win32" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.win32.wpf.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="win32" />
			<param name="p2.ws" value="wpf" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.linux.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.linux.gtk.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.linux.gtk.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="linux" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.macosx.carbon.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="carbon" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.macosx.cocoa.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.macosx.cocoa.x86_64}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="macosx" />
			<param name="p2.ws" value="cocoa" />
			<param name="p2.arch" value="x86_64" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.hpux.motif.ia64_32}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="hpux" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ia64_32" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.solaris.gtk.sparc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="sparc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.solaris.gtk.x86}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="solaris" />
			<param name="p2.ws" value="gtk" />
			<param name="p2.arch" value="x86" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>


		<antcall target="run.director">
			<param name="p2.director.installIU" value="org.eclipse.rcp.sdk.id" />
			<param name="p2.director.version" value="3.5.0.${buildId}" />
			<param name="p2.director.profile" value="RCPSDKProfile" />
			<param name="p2.director.install.path" value="${p2.rcpsdk.install.aix.motif.ppc}/eclipse" />
			<param name="p2.director.extraArgs" value="-profileProperties org.eclipse.update.install.features=true" />
			<param name="p2.os" value="aix" />
			<param name="p2.ws" value="motif" />
			<param name="p2.arch" value="ppc" />
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>

	</target>

	<!--
	p2.generator.base
	p2.generator.feature.dir
	p2.generator.plugins.dir
	p2.repo
	-->
	<target name="run.generator.feature.based">
		<!-- note: use the full path to the exe here, otherwise it seems to call the exe from the builder -->
		<exec executable="${base.builder}/eclipse" failonerror="false" timeout="900000">
			<arg line="-vm ${java15-home}/bin/java" />
			<arg line="-application org.eclipse.equinox.p2.metadata.generator.EclipseGenerator" />
			<arg line="-consoleLog" />
			<arg line="-nosplash" />
			<arg line="--launcher.suppressErrors" />
			<arg line="-base ${p2.generator.base}" />
			<arg line="-features ${p2.generator.feature.dir}" />
			<arg line="-bundles ${p2.generator.plugins.dir}" />
			<arg line="-compress" />
			<arg line="-flavor ${p2.flavor}" />
			<arg line="-publishArtifacts" />
			<arg line="-metadataRepository file:${p2.repo}" />
			<arg line="-artifactRepository file:${p2.repo}" />
			<arg line="-metadataRepositoryName ${p2.repo.name}" />
			<arg line="-artifactRepositoryName ${p2.repo.name}" />
			<arg line="-noDefaultIUs" />
			<arg line="-append" />
		</exec>
	</target>

	<target name="generate.metadata.releng.tools">
		<property name="p2.releng.tools.dir" value="${p2.output.base}/releng.tools" />
		<mkdir dir="${p2.releng.tools.dir}" />
		<antcall target="extract">
			<param name="extract-src" value="${releng.tools.archive}" />
			<param name="extract-dest" value="${p2.releng.tools.dir}" />
		</antcall>

		<antcall target="run.generator.feature.based">
			<param name="p2.generator.base" value="${p2.releng.tools.dir}/eclipse" />
			<param name="p2.generator.feature.dir" value="${p2.releng.tools.dir}/eclipse/features" />
			<param name="p2.generator.plugins.dir" value="${p2.releng.tools.dir}/eclipse/plugins" />
			<!-- publish the metadata to the real update site -->
			<param name="p2.repo" value="${buildRepo}" />
		</antcall>
	</target>

	<!--
	p2.generator.source
	p2.generator.root
	p2.generator.root.version
	p2.repo
	-->
	<target name="run.generator">
		<!-- note: use the full path to the exe here, otherwise it seems to call the exe from the builder -->
		<exec executable="${base.builder}/eclipse" failonerror="false" timeout="900000">
			<arg line="-vm ${java15-home}/bin/java" />
			<arg line="-application org.eclipse.equinox.p2.metadata.generator.EclipseGenerator" />
			<arg line="-consoleLog" />
			<arg line="-nosplash" />
			<arg line="--launcher.suppressErrors" />
			<arg line="-metadataRepository file:${p2.repo}" />
			<arg line="-artifactRepository file:${p2.repo}" />
			<arg line="-metadataRepositoryName ${p2.repo.name}" />
			<arg line="-artifactRepositoryName ${p2.repo.name}" />
			<arg line="-source ${p2.generator.source}" />
			<arg line="-compress" />
			<arg line="-rootVersion ${p2.generator.root.version}" />
			<arg line="-root ${p2.generator.root}" />
			<arg line="-flavor ${p2.flavor}" />
			<arg line="-publishArtifacts" />
			<arg line="-append" />
		</exec>
	</target>

	<target name="run.director">
		<delete dir="${base.builder}/configuration/.settings" includeemptydirs="true" failonerror="false" />
		<!--	<copy file="${equinox.build.configs}/equinox.prov/files/config.ini.director" tofile="${base.builder}/configuration/config.ini" overwrite="true" /> -->
		<exec executable="${base.builder}/eclipse" failonerror="false" dir="${base.builder}" timeout="900000" output="${directorlog}" resultproperty="directorcode">
			<arg line="-vm ${java15-home}/bin/java" />
			<arg line="-application org.eclipse.equinox.p2.director.app.application" />
			<arg line="-nosplash" />
			<arg line="--launcher.suppressErrors" />
			<arg line="-consoleLog" />
			<arg line="-flavor ${p2.flavor}" />
			<arg line="-installIU ${p2.director.installIU}" />
			<arg line="-version ${p2.director.version}" />
			<arg line="-p2.os ${p2.os}" />
			<arg line="-p2.ws ${p2.ws}" />
			<arg line="-p2.arch ${p2.arch}" />
			<arg line="-roaming" />
			<arg line="-profile ${p2.director.profile}" />
			<arg line="${p2.director.extraArgs}" />
			<arg line="-metadataRepository file:${p2.repo}" />
			<arg line="-artifactRepository file:${p2.repo}" />
			<arg line="-metadataRepositoryName ${p2.repo.name}" />
			<arg line="-artifactRepositoryName ${p2.repo.name}" />
			<arg line="-destination ${p2.director.install.path}" />
			<arg line="-bundlepool ${p2.director.install.path}" />
			<arg line="-vmargs" />
			<arg line="-Declipse.p2.data.area=${p2.director.install.path}/p2" />
			<arg line="-Declipse.p2.MD5Check=false" />
			<arg line="-Declipse.p2.profile=@none" />
		</exec>
		<echo message="director ${p2.director.install.path}" file="${directorlog}" append="true" />
		<echo message="${directorcode}" file="${directorlog}" append="true" />
	</target>


	<target name="zip.install">

		<property name="output.dir" value="${equinoxPostingDirectory}/${buildLabel}" />
		<mkdir dir="${output.dir}" />


		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!-- win32 win32 x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.sdk.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-win32.zip" />
				</antcall>
			</sequential>
			<sequential>
				<!-- linux gtk x86 -->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-gtk.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- macosx -->
				<!-- temp fix for https://bugs.eclipse.org/bugs/show_bug.cgi?id=223319 -->
				<delete file="${p2.sdk.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.sdk.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-macosx-carbon.tar.gz" />
				</antcall>
			</sequential>

			<sequential>
				<!-- macosx -->
				<!-- temp fix for https://bugs.eclipse.org/bugs/show_bug.cgi?id=223319 -->
				<delete file="${p2.sdk.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.sdk.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<delete file="${p2.sdk.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.sdk.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>


			<sequential>
				<!-- win32 win32 x86 agent -->
				<copy file="${buildDirectory}/plugins/org.eclipse.equinox.p2.ui.admin.rcp/config.ini" tofile="${p2.agent.install.win32}/configuration/config.ini" overwrite="true" />
				<exec dir="${p2.agent.install.win32}" executable="zip">
					<arg line="-q ${output.dir}/equinox-p2-agent-${buildId}-win32.zip -r ." />
				</exec>
				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.sdk.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.sdk.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.sdk.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86 agent -->
				<copy file="${buildDirectory}/plugins/org.eclipse.equinox.p2.ui.admin.rcp/config.ini" tofile="${p2.agent.install.linux}/configuration/config.ini" overwrite="true" />
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.agent.install.linux}" />
					<param name="tar.base.filename" value="${output.dir}/equinox-p2-agent-${buildId}-linux.tar" />
				</antcall>

				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>

				<!-- linux gtk s390 -->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.gtk.s390}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk-s390.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-gtk-s390.tar.gz" />
				</antcall>

				<!-- linux gtk s390x -->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.gtk.s390x}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk-s390x.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-gtk-s390x.tar.gz" />
				</antcall>

				<!-- linux motif x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.motif.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-motif.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-motif.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.sdk.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>

			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.sdk.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.sdk.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.sdk.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.sdk.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-solaris-gtk-x86.zip" />
				</antcall>
				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.sdk.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-SDK-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-SDK-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx agent -->
				<copy file="${buildDirectory}/plugins/org.eclipse.equinox.p2.ui.admin.rcp/config.ini" tofile="${p2.agent.install.macosx}/configuration/config.ini" overwrite="true" />
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.agent.install.macosx}" />
					<param name="tar.base.filename" value="${output.dir}/equinox-p2-agent-${buildId}-macosx.tar" />
				</antcall>
			</sequential>
		</parallel>

		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--platform drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.platform.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.platform.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.platform.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.platform.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.platform.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.platform.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.platform.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.platform.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-solaris-gtk-x86.zip" />
				</antcall>
				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.platform.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.platform.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platform.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.platform.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platform.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64-->
				<delete file="${p2.platform.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platform.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platform.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>

		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--platform sdk drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.platformsdk.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.platformsdk.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.platformsdk.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.platformsdk.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>
			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.platformsdk.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.platformsdk.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.platformsdk.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.platformsdk.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-solaris-gtk-x86.zip" />
				</antcall>
				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.platformsdk.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx carbon -->
				<delete file="${p2.platformsdk.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platformsdk.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx cocoa -->
				<delete file="${p2.platformsdk.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platformsdk.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64 -->
				<delete file="${p2.platformsdk.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.platformsdk.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.platformsdk.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-platform-SDK-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-platform-SDK-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>


		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--RCP drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.rcp.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk s390-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.s390}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-s390.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-s390.tar.gz" />
				</antcall>
				<!-- linux gtk s390x-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.s390x}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-s390x.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-s390x.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.rcp.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.rcp.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk-x86.zip" />
				</antcall>
				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64-->
				<delete file="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>
		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--RCP drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.rcp.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.rcp.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.rcp.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk-x86.zip" />
				</antcall>

				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64-->
				<delete file="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>

		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--RCP drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.rcp.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.rcp.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.rcp.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.rcp.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-solaris-gtk-x86.zip" />
				</antcall>

				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.rcp.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcp.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64-->
				<delete file="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcp.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcp.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>

		<parallel failonany="true" threadCount='4'>
			<sequential>
				<!--RCP SDK drops-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32.zip" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.win32.win32.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-win32.zip" />
				</antcall>

				<!-- win32 win32 x86_64 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32-x86_64.zip" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.win32.win32.x86_64}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32-x86_64.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-win32-x86_64.zip" />
				</antcall>

				<!-- win32 wpf x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32-wpf.zip" failonerror="false" />
				<copy file="${equinox.build.configs}/equinox.prov/wpftemp/eclipse.ini" tofile="${p2.rcpsdk.install.win32.wpf.x86}/eclipse/eclipse.ini" overwrite="true" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.win32.wpf.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-win32-wpf.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-win32-wpf.zip" />
				</antcall>
			</sequential>

			<sequential>
				<!-- linux gtk x86-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.linux.gtk.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-linux-gtk.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-linux-gtk.tar.gz" />
				</antcall>
				<!-- linux gtk ppc-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.linux.gtk.ppc}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-linux-gtk-ppc.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-linux-gtk-ppc.tar.gz" />
				</antcall>
				<!-- linux gtk x86_64-->
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.linux.gtk.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-linux-gtk-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-linux-gtk-x86_64.tar.gz" />
				</antcall>
			</sequential>
			<sequential>
				<!-- hpux motif ia64_32-->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-hpux-motif-ia64_32.zip" failonerror="false" />
				<chmod dir="${p2.rcpsdk.install.hpux.motif.ia64_32}" perm="755" includes="**/*.so" />
				<exec dir="${p2.rcpsdk.install.hpux.motif.ia64_32}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-hpux-motif-ia64_32.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-hpux-motif-ia64_32.zip" />
				</antcall>
				<!-- solaris gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-solaris-gtk.zip" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.solaris.gtk.sparc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-solaris-gtk.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-solaris-gtk.zip" />
				</antcall>
				<!-- solaris gtk x86 -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-solaris-gtk-x86.zip" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.solaris.gtk.x86}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-solaris-gtk-x86.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-solaris-gtk-x86.zip" />
				</antcall>

				<!-- aix gtk sparc -->
				<delete file="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-aix-motif.zip" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.aix.motif.ppc}" executable="zip">
					<arg line="-q ${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-aix-motif.zip -r ." />
				</exec>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-aix-motif.zip" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcpsdk.install.macosx.carbon.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.macosx.carbon.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.macosx.carbon.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-macosx-carbon.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-macosx-carbon.tar.gz" />
				</antcall>

				<!-- macosx -->
				<delete file="${p2.rcpsdk.install.macosx.cocoa.x86}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.macosx.cocoa.x86}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.macosx.cocoa.x86}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-macosx-cocoa.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-macosx-cocoa.tar.gz" />
				</antcall>

				<!-- macosx cocoa x86_64-->
				<delete file="${p2.rcpsdk.install.macosx.cocoa.x86_64}/eclipse/eclipse" failonerror="false" />
				<exec dir="${p2.rcpsdk.install.macosx.cocoa.x86_64}/eclipse" executable="ln">
					<arg line="-s Eclipse.app/Contents/MacOS/eclipse eclipse" />
				</exec>
				<antcall target="p2.tar">
					<param name="tar.base.dir" value="${p2.rcpsdk.install.macosx.cocoa.x86_64}" />
					<param name="tar.base.filename" value="${postingDirectory}/${buildLabel}/eclipse-RCP-SDK-${buildId}-macosx-cocoa-x86_64.tar" />
				</antcall>
				<antcall target="generateChecksums">
					<param name="archiveName" value="eclipse-RCP-SDK-${buildId}-macosx-cocoa-x86_64.tar.gz" />
				</antcall>
			</sequential>
		</parallel>

	</target>


	<target name="generateChecksums">
		<mkdir dir="${postingDirectory}/${buildLabel}/checksum" />
		<property name="archiveFullPath" value="${postingDirectory}/${buildLabel}/${archiveName}" />
		<checksum file="${archiveFullPath}" property="md5" />
		<checksum file="${archiveFullPath}" algorithm="SHA" property="sha" />
		<parallel>
			<echo message="${md5} *${archiveName}" file="${postingDirectory}/${buildLabel}/checksum/${archiveName}.md5" />
			<echo message="${sha} *${archiveName}" file="${postingDirectory}/${buildLabel}/checksum/${archiveName}.sha1" />
		</parallel>
	</target>


	<target name="p2.tar">
		<echo message="Building tar ${tar.base.filename} from ${tar.base.dir}/*" />
		<exec dir="${tar.base.dir}" executable="sh">
			<arg line='-c "tar -cvf ${tar.base.filename} *"' />
		</exec>
		<gzip zipfile="${tar.base.filename}.gz" src="${tar.base.filename}" />
		<delete file="${tar.base.filename}" />
	</target>

	<target name="extract">
		<!-- set the target based on which OS we are running on since there
		is a difference between unzip and untar/gunzip -->
		<condition property="extract.target" value="extract-zip">
			<contains string="${extract-src}" substring=".zip" />
		</condition>
		<condition property="extract.target" value="extract-tar.gz">
			<contains string="${extract-src}" substring=".tar.gz" />
		</condition>
		<antcall target="${extract.target}" />
	</target>

	<target name="extract-zip">
		<unzip src="${extract-src}" dest="${extract-dest}" />
	</target>

	<target name="extract-tar.gz">
		<echo message="Expanding ${extract-src} into ${extract-dest}" />
		<exec dir="${extract-dest}" executable="tar">
			<arg line="-xzf ${extract-src}" />
		</exec>
	</target>


</project>

