<project name="Customized testing instructions" default="customSetup">

	<target name="customSetup">
		<!--copy the script which sets up environment and invokes the tests on test machine-->
		<chmod file="${tester}/testAll.sh" perm="755" />
		<exec dir="." executable="${copyClient}">
			<arg line="${tester}/testAll.sh ${testMachine}:${executionDir}" />
		</exec>
		<!--copy in test script modified for running Team CVS tests-->
		<exec dir="." executable="${copyClient}">
			<arg line="${tester}/../../testScripts/test.xml ${testMachine}:${executionDir}" />
		</exec>
		<antcall target="adjustIniFile"/>
		<!--copy in the properties file for testing with vm args to run on Mac OSX-->	
		<exec dir="." executable="${copyClient}">
			<arg line="${tester}/vm.properties ${testMachine}:${executionDir}" />
		</exec>
	</target>
	
	<target name="adjustIniFile">
		<loadproperties srcfile="${buildDirectory}/pluginVersions.properties"/>
		<condition property="newVersionQualifier" value="${forceContextQualifier}" else="${org.eclipse.jdt.debug}">
			<isset property="forceContextQualifier"/>
		</condition>
		<replace file="${tester}/vm.properties" >
			<replacefilter token="@qualifier@" value="${newVersionQualifier}"/>
		</replace>
	</target>
</project>