<html>
<head>
<title>Building Eclipse</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="../../../default_style.css" type="text/css">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<h1>Building Eclipse Products</h1>
<h1><font size="+1">** work in progress **</font></h1>
<h1>Table of Contents</h1>
<ol>
  <li><a href="#description">Description</a></li>
  <li><a href="#systemrequirements">System Requirements</a></li>
  <li><a href="#setup">Setup</a></li>
  <li><a href="#running">Running the build</a></li>
  <li><a href="#build_platforms">Supported build platforms</a></li>
  <li><a href="#limitations">Known limitations</a></li>
</ol>
<h4>&nbsp;</h4>
<h4><a name="description"></a>Description</h4>
<p>This document describes how to run a build from the command line which produces 
  all Eclipse SDK and runtime products. The PDE-BUILD, Ant and the JDT Core Eclipse 
  components are the techologies used in this process. These, along with scripts 
  that drive the process, are contained in the combined resources of <a href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.basebuilder/">org.eclipse.releng.basebuilder</a> 
  and <a href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.eclipsebuilder/">org.eclipse.releng.eclipsebuilder</a>, 
  two projects available from the dev.eclipse.org Eclipse repository.</p>
<p>PDE-BUILD is a technology in Eclipse which generates build scripts for features, 
  plugins and fragments. The script generation functions are made available via 
  custom Ant tasks (see <a href="http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/org.eclipse.pde.build/notes/usingPDEBuild.html?rev=HEAD&content-type=text/html">documentation 
  on PDE-BUILD</a>). Calls to these tasks are contained in static Ant scripts 
  provided in the projects noted above. The JDT Core compiler is used for compiling 
  the java source code in Ant javac calls. The Ant technology in Eclipse is used 
  to run both static and generated Ant scripts.</p>
<p>This is the mechanism used by Eclipse Release Engineering.</p>
<p>&nbsp;</p>
<p><a name="systemrequirements"></a><b>System Requirements</b></p>
<ol>
  <li>Sun or IBM JDK 1.3 or higher</li>
  <li> (On Unix only) Windows version of the rt.jar (bootstrap classes, classes 
    that comprise the Java platform), version 1.3.* or higher</li>
  <li><a href="http://ccvs.cvshome.org/servlets/ProjectDownloadList">CVS 1.10 
    </a> or higher</li>
  <li>Info-ZIP Zip version 2.3 or higher</li>
  <li>Info-ZIP UnZip version 5.41 or higher</li>
  <li>GNU tar version 1.12 or higher</li>
  <li>&gt;1 Gigabyte free disk space (this process builds ALL Eclipse products, 
    23 zip files, 6-67 meg in size)</li>
  <li><a href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.basebuilder/">org.eclipse.releng.basebuilder</a></li>
  <li><a href="http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.releng.eclipsebuilder/">org.eclipse.releng.eclipsebuilder</a></li>
</ol>
<p>&nbsp;</p>
<p><a name="setup"></a><b>Initial Setup</b></p>
<ol>
  <li>Install the JDK, cvs client, Info-ZIP Zip and Unzip, GNU tar as per each 
    program's instructions.</li>
  <li>Set the JAVA_HOME environment variable to the JDK installation directory.</li>
  <li>(Windows 98) Increase the default environment space as specified <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;q230205">here</a>.</li>
  <li>Export the projects org.eclipse.releng.basebuilder and org.eclipse.releng.eclipsebuilder 
    to an empty directory created near the root of a drive to keep path lengths 
    to a minimum. The build may fail due to some paths used in file copy operations 
    exceeding 255 characters. 
    <blockquote> 
      <p>cvs -d :pserver:anonymous@dev.eclipse.org:/home/eclipse export -r &lt;tag&gt; 
        -d &lt;builderDirectory&gt; org.eclipse.releng.basebuilder</p>
      <p>cvs -d :pserver:anonymous@dev.eclipse.org:/home/eclipse export -r &lt;tag&gt; 
        -d &lt;builderDirectory&gt; org.eclipse.releng.eclipsebuilder</p>
      <p>The files from both projects <u>must</u> be in the same directory for 
        path calculations.</p>
    </blockquote>
  </li>
  <li>(Unix) set execute permission on the buildEclipse shell script, &quot;chmod 
    755 buildEclipse&quot; .</li>
</ol>
<ol>
  <blockquote> 
    <p>&nbsp;</p>
  </blockquote>
</ol>
<h4><a name="running"></a>Run the Build</h4>
<blockquote> 
  <p>The scripts buildEclipse.bat and buildEclipse are included in the org.eclipse.releng.eclipsebuilder 
    project to invoke the Eclipse AntRunner on the Ant build scripts.</p>
  <p>To execute, use the following command from the directory containing the build 
    scripts specifying any of the optional parameters described below:</p>
  <p><b>On Windows:</b></p>
  <p>buildEclipse [buildid name][buildLabel name][-buildType I|N|S|M][-bootclasspath 
    path][-mail] [-mapVersionTag tag][postingDirectory path]</p>
  <p><b>On *nix:</b></p>
  <p>buildEclipse [-os os][-ws ws][-arch arch][buildid name][buildLabel name][-buildType 
    I|N|S|M][-bootclasspath path][-mail] [-mapVersionTag tag][postingDirectory 
    path]</p>
  <table width="86%" border="1">
    <tr> 
      <td width="24%">Parameter</td>
      <td width="76%">Description</td>
    </tr>
    <tr>
      <td width="24%">arch (on *nix only)</td>
      <td width="76%">System architecture. See <a href="#build_platforms">Supported 
        Build Platforms</a> for list of values. Default set to x86.</td>
    </tr>
    <tr> 
      <td width="24%">buildid</td>
      <td width="76%">Default set to&lt;buildType&gt;&lt;datestamp&gt;, i.e. I20021217, 
        but can be set to any String value.</td>
    </tr>
    <tr> 
      <td width="24%">buildLabel</td>
      <td width="76%">The name of the directory that will contain all the products 
        of the build. Default set to &lt;buildType&gt;-&lt;buildid&gt;-&lt;timestamp&gt;, 
        ie. I-I20021217-200212170800. This particular nomenclature is used internally 
        for php scripts web, but can be set to any String value.</td>
    </tr>
    <tr> 
      <td width="24%">buildType</td>
      <td width="76%"> 
        <p>The buildType specification is used to identify the build as one of 
          the following:</p>
        <p>I = Integration<br>
          N= Nightly<br>
          M= Maintenance<br>
          R= Release</p>
        <p>S= Stable<br>
          T= Test<br>
        </p>
        <p>Specifying 'N' as the buildType will retrieve the HEAD stream of all 
          plugins, fragments and features listed in the *.map files instead of 
          using the specified tags. Typically, I and N are used for building the 
          latest development stream of Eclipse. M is used when a maintenance stream 
          of Eclipse is being built. Integration builds are usually promoted to 
          being Release or Stable builds.</p>
      </td>
    </tr>
    <tr> 
      <td width="24%">bootclasspath</td>
      <td width="76%">Absolute path to the classes that implement the Java 2 Platform, 
        also known as bootstrap classes. These are typically contained in an rt.jar, 
        inluded with a JRE or JDK. The default value set to the location of the 
        rt.jar included with the installed JDK. If building on a Unix operating 
        system, the bootclasspath should be set to a Windows version of the rt.jar. 
        The Windows version allows all os specific plugins and fragments to compile, 
        whereas the Unix versions will not allow the Windows specific plugins 
        and fragments to compile cleanly.</td>
    </tr>
    <tr> 
      <td width="24%" height="173">mail</td>
      <td width="76%" height="173"> 
        <p>Set this flag if you wish to send mail when a build starts. Setting 
          this flag will require a monitor.properties file created in the same 
          directory containing the exported build scripts. At a minimum, the file 
          will require key value entries for the following:</p>
        <p>host: smtp server used to send mail, i.e. host=aserver.ca.ibm.com</p>
        <p>sender: email address of sender, i.e. sender=myname@ca.ibm.com</p>
        <p>recipients: single e-mail address or comma-separated list of email 
          addresses of recipients, i.e. recipients=foo1@bar1.com, foo2@bar2.com,...</p>
      </td>
    </tr>
    <tr> 
      <td width="24%">mapVersionTag</td>
      <td width="76%">The tag of the org.eclipse.releng project to checkout from 
        dev.eclipse.org. The default value is set to HEAD. Use a specific tag 
        to build an integration build previously posted on downloads.eclipse.org. 
        The tag names match the date and time of the desired build with a 'v' 
        prefix, i.e. v200203071430.</td>
    </tr>
    <tr> 
      <td width="24%">os (on *nix only)</td>
      <td width="76%">The operating system. See <a href="#build_platforms">Supported 
        Build Platforms</a> for list of values. Default set to linux.</td>
    </tr>
    <tr> 
      <td width="24%">postingDirectory</td>
      <td width="76%">The directory to which the products of the build should 
        be copied. The product of the build is a directory, named with the buildLabel 
        (see description below), containing the zip files of the SDK and runtime 
        products and web pages. Default value set to current directory.</td>
    </tr>
    <tr> 
      <td width="24%">ws (on *nix only)</td>
      <td width="76%">The windowing system. See <a href="#build_platforms">Supported 
        Build Platforms</a> for list of values. Default set to motif.</td>
    </tr>
  </table>
  <p>&nbsp;</p>
</blockquote>
<p><b><font size="+1"><a name="build_platforms"></a></font></b><font size="+1"><b>Supported 
  Build Platforms</b> </font></p>
<p>Eclipse can be built on any of the following platforms. With some <a href="#limitations">limitations</a> 
  any platform can be used to build Eclipse for any or all supported platforms.</p>
<table width="58%" border="1">
  <tr> 
    <td width="48%">Operating System (os)</td>
    <td width="52%">Windowing System (ws)</td>
    <td width="52%">
      Architecture(arch)
      </td>
  </tr>
  <tr> 
    <td width="48%">win32</td>
    <td width="52%">win32</td>
    <td width="52%">x86</td>
  </tr>
  <tr> 
    <td width="48%">linux</td>
    <td width="52%">motif</td>
    <td width="52%">x86</td>
  </tr>
  <tr> 
    <td width="48%">linux</td>
    <td width="52%">gtk</td>
    <td width="52%">x86</td>
  </tr>
  <tr> 
    <td width="48%">solaris</td>
    <td width="52%">motif</td>
    <td width="52%">sparc</td>
  </tr>
  <tr> 
    <td width="48%">aix</td>
    <td width="52%"> 
      <p>motif</p>
    </td>
    <td width="52%">ppc</td>
  </tr>
  <tr> 
    <td width="48%">hpux</td>
    <td width="52%">motif</td>
    <td width="52%">PA_RISC</td>
  </tr>
  <tr> 
    <td width="48%">qnx</td>
    <td width="52%">photon</td>
    <td width="52%">x86</td>
  </tr>
</table>
<p>&nbsp;</p>
<h2><a name="limitations"></a>Known Limitations </h2>
<ol>
  <li>This mechanism has only been tested on Redhat Linux 7.2 (Motif) and Windows 
    2000\XP.</li>
  <li>Building unix flavours of Eclipse on Windows will result in incorrect file 
    permissions. The *.so, *.sl, and Eclipse executable files will not have execute 
    permissions. In addition, linux-motif builds will not have symbolic links 
    (libXm.so and libXm.so.2) to libXm.so.2.1 in the installation root directory. 
    In these cases you would have to write an install or post install script to 
    set permissionss properly. (UNIX builds built on UNIX systems will set sufficient 
    permissions and make the appropriate soft links). 
  <li>When the Mac port of Eclipse is built on a Windows operating system, a soft 
    link to the root of the eclipse installation directory will be missing. The 
    following post-installation steps will be required: </li>
  <ul>
    <li>cd to Eclipse.app/Contents/Resources</li>
    <li> create a symbolic link to the eclipse installation directory by executing 
      the following command: &quot;ln -s Java ../../..&quot;</li>
    <li>cd to ../Contents/MacOS</li>
    <li>set execute permission on the eclipse file by executing this command: 
      &quot;chmod 555 eclipse&quot;</li>
  </ul>
  <li>Only Java source code is compiled. *.dll, *so, *sl and Eclipse executables 
    are all checked out of dev.eclipse.org prebuilt in this build process.</li>
  <li>This process builds all Eclipse runtime and SDK products requiring &gt; 
    1 gig of hard disk space on the build machine.</li>
  <li> InfoZIP Zip and Unzip are used to preserve file permissions when extracting 
    or creating zip files. The dependency on using these should be removed in 
    future releases by using the Ant tar and zip/unzip tasks instead.</li>
</ol>

</body>
</html>
